<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Asistencia</title>
    
    {% load static %}  <!-- üîπ IMPORTANTE: Cargar archivos est√°ticos -->
    <link rel="stylesheet" href="{% static 'css/configuracion.css' %}">
</head>
<body>

    <!-- Encabezado con el Logo -->
    {% load static %}
    <header>
        <img src="{% static 'img/logo.png' %}" alt="Logo" class="header-img">

    <div class="grid-container">
        <a href="{% url 'turnos' %}" class="box {% if request.path == '/turnos/' %}activo{% endif %}">Turnos</a>
        <a href="{% url 'empleados' %}" class="box {% if request.path == '/empleados/' %}activo{% endif %}">Empleados</a>
        <a href="{% url 'grupos' %}" class="box {% if request.path == '/grupos/' %}activo{% endif %}">Grupos</a>

        <a href="{% url 'reportes_view' %}" class="box {% if request.path == '/reportes/' %}activo{% endif %}">Reportes</a>

        <a href="{% url 'configuracion' %}" class="box {% if request.path == '/configuracion/' %}activo{% endif %}">Configuraciones</a>
    </div>
    </header>
    

    <h1 class="titulo-configuracion">Cofiguraci√≥n</h1>
    <a href="{% url 'home' %}">Volver al Inicio</a>


    <div class="contenedor-tabla">
        {% if request.user.hremployee.emp_role.nombre == "Administrador" %}
        <h2>Gesti√≥n de Roles</h2>
        <table class="tabla-configuracion">
            <thead>
                <tr>
                    <th>Empleado</th>
                    <th>Rol actual</th>
                    <th>Nuevo rol</th>
                    <th>Acci√≥n</th>
                </tr>
            </thead>
            <tbody>
                {% for emp in empleados %}
                <tr>
                    <form method="post">
                        {% csrf_token %}
                        <td>{{ emp.emp_firstname }} {{ emp.emp_lastname }}</td>
                        <td>{{ emp.emp_role.nombre }}</td>
                        <td>
                            <input type="hidden" name="usuario_id" value="{{ emp.id }}">
                            <select name="nuevo_rol_id">
                                {% for rol in roles %}
                                    <option value="{{ rol.id }}" {% if rol.id == emp.emp_role.id %}selected{% endif %}>{{ rol.nombre }}</option>
                                {% endfor %}
                            </select>
                        </td>
                        <td>
                            <button type="submit" class="btn-guardar">Guardar</button>
                        </td>
                    </form>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <p style="color: red;">‚ùå No tienes permiso para ver esta secci√≥n.</p>
        {% endif %}
    </div>



</body>
</html>

